/*
 * jQuery Nivo Slider v2.7.1
 * http://nivo.dev7studios.com
 *
 * Copyright 2011, Gilbert Pellegrom
 * Free to use and abuse under the MIT license.
 * http://www.opensource.org/licenses/mit-license.php
 * 
 * March 2010
 */

(function(a){var b=function(b,c){var d=a.extend({},a.fn.nivoSlider.defaults,c);var e={currentSlide:0,currentImage:"",totalSlides:0,running:false,paused:false,stop:false};var f=a(b);f.data("nivo:vars",e).css({position:"relative","max-width":"100%",height:"auto"}).addClass("nivoSlider");var g=f.children(),h=0,i="";g.each(function(){var b=a(this);var c="";if(!b.is("img")){if(b.is("a")){b.addClass("nivo-imageLink");c=b}b=b.find("img:first")}var d=d===0?b.attr("width"):b.width(),f=f===0?b.attr("height"):b.height();if(c!==""){c.css("display","none")}b.css("display","none");e.totalSlides++;if(a(this).height()>h){i=a(this);h=a(this).height()}});f.height(h+"px");if(d.randomStart){d.startSlide=Math.floor(Math.random()*e.totalSlides)}if(d.startSlide>0){if(d.startSlide>=e.totalSlides){d.startSlide=e.totalSlides-1}e.currentSlide=d.startSlide}if(a(g[e.currentSlide]).is("img")){e.currentImage=a(g[e.currentSlide])}else{e.currentImage=a(g[e.currentSlide]).find("img:first")}if(a(g[e.currentSlide]).is("a")){a(g[e.currentSlide]).css("display","block")}f.append('<img id="mainImg" src="#" />');var j=a("#mainImg");j.css("width","100%").attr("src",e.currentImage.attr("src")).show();f.height(j.height()+"px");a(window).resize(function(){f.height(j.height()+"px");a(".nivo-slice").remove();a(".nivo-box").remove()});f.append(a('<div class="nivo-caption"><p></p></div>').css({display:"none",opacity:d.captionOpacity}));a(".nivo-caption",f).css("opacity",0);var k=function(b){var c=a(".nivo-caption",f);if(e.currentImage.attr("title")!==""&&e.currentImage.attr("title")!==undefined){var d=e.currentImage.attr("title");if(d.substr(0,1)==="#"){d=a(d).html()}if(c.css("opacity")!==0){c.find("p").stop().fadeTo(b.animSpeed,0,function(){a(this).html(d);a(this).stop().fadeTo(b.animSpeed,1)})}else{c.find("p").html(d)}c.stop().fadeTo(b.animSpeed,b.captionOpacity)}else{c.stop().fadeTo(b.animSpeed,0)}};k(d);var l=0;if(!d.manualAdvance&&g.length>1){l=setInterval(function(){r(f,g,d,false)},d.pauseTime)}if(d.directionNav){f.append('<div class="nivo-directionNav"><a class="nivo-prevNav">'+d.prevText+'</a><a class="nivo-nextNav">'+d.nextText+"</a></div>");if(d.directionNavHide){a(".nivo-directionNav",f).hide();f.hover(function(){a(".nivo-directionNav",f).show()},function(){a(".nivo-directionNav",f).hide()})}a("a.nivo-prevNav",f).live("click",function(){if(e.running){return false}clearInterval(l);l="";e.currentSlide-=2;r(f,g,d,"prev")});a("a.nivo-nextNav",f).live("click",function(){if(e.running){return false}clearInterval(l);l="";r(f,g,d,"next")})}if(d.controlNav){var m=a('<div class="nivo-controlNav"></div>');f.append(m);for(var n=0;n<g.length;n++){if(d.controlNavThumbs){var o=g.eq(n);if(!o.is("img")){o=o.find("img:first")}if(d.controlNavThumbsFromRel){m.append('<a class="nivo-control" rel="'+n+'"><img src="'+o.attr("rel")+'" alt="" /></a>')}else{m.append('<a class="nivo-control" rel="'+n+'"><img src="'+o.attr("src").replace(d.controlNavThumbsSearch,d.controlNavThumbsReplace)+'" alt="" /></a>')}}else{m.append('<a class="nivo-control" rel="'+n+'">'+(n+1)+"</a>")}}m.css({width:m.children().length*(m.children().width()+parseFloat(m.children().css("margin-right"))),marginLeft:"-"+m.children().length*(m.children().width()+parseFloat(m.children().css("margin-right")))/2+"px"});a(".nivo-controlNav a:eq("+e.currentSlide+")",f).addClass("active");a(".nivo-controlNav a",f).live("click",function(){if(e.running){return false}if(a(this).hasClass("active")){return false}clearInterval(l);l="";j.attr("src",e.currentImage.attr("src"));e.currentSlide=a(this).attr("rel")-1;r(f,g,d,"control")})}if(d.keyboardNav){a(window).keypress(function(a){if(a.keyCode==="37"){if(e.running){return false}clearInterval(l);l="";e.currentSlide-=2;r(f,g,d,"prev")}if(a.keyCode==="39"){if(e.running){return false}clearInterval(l);l="";r(f,g,d,"next")}})}if(d.pauseOnHover){f.hover(function(){e.paused=true;clearInterval(l);l=""},function(){e.paused=false;if(l===""&&!d.manualAdvance){l=setInterval(function(){r(f,g,d,false)},d.pauseTime)}})}f.bind("nivo:animFinished",function(){e.running=false;a(g).each(function(){if(a(this).is("a")){a(this).css("display","none")}});if(a(g[e.currentSlide]).is("a")){a(g[e.currentSlide]).css("display","block")}if(l===""&&!e.paused&&!d.manualAdvance){l=setInterval(function(){r(f,g,d,false)},d.pauseTime)}d.afterChange.call(this);var b=a(".nivo-slice").length>0?a(".nivo-slice:first-child img").height():a(".nivo-box:first-child img").height();j.height(b).fadeIn()});var p=function(b,c,d){for(var e=0;e<c.slices;e++){var f=Math.round(b.width()/c.slices);var g=d.currentImage.parent().is("a")?d.currentImage.parent().height():d.currentImage.height();if(e===c.slices-1){b.append(a('<div class="nivo-slice" name="'+e+'"><img src="'+d.currentImage.attr("src")+'" style="position:absolute; width:'+b.width()+"px; height:auto; max-height:"+b.height()+"px; display:block !important; top:0; left:-"+(f+e*f-f)+'px;" /></div>').css({left:f*e+"px",width:b.width()-f*e+"px",height:b.height()+"px",opacity:"0",overflow:"hidden",maxHeight:b.height()}))}else{b.append(a('<div class="nivo-slice" name="'+e+'"><img src="'+d.currentImage.attr("src")+'" style="position:absolute; width:'+b.width()+"px; height:auto; max-height:"+b.height()+"px; display:block !important; top:0; left:-"+(f+e*f-f)+'px;" /></div>').css({left:f*e+"px",width:f+"px",height:b.height()+"px",opacity:"0",overflow:"hidden",maxHeight:b.height()}))}}};var q=function(b,c,d){var e=Math.round(b.width()/c.boxCols),f="";if(d.currentImage.parent().is("a")){f=Math.round(d.currentImage.parent().height()/c.boxRows)}else{f=Math.round(d.currentImage.height()/c.boxRows)}for(var g=0;g<c.boxRows;g++){for(var h=0;h<c.boxCols;h++){if(h===c.boxCols-1){b.append(a('<div class="nivo-box" name="'+h+'" rel="'+g+'"><img src="'+d.currentImage.attr("src")+'" style="position:absolute; width:'+b.width()+"px; height:auto; max-height:"+b.height()+"px; display:block; top:-"+f*g+"px"+"; left:-"+e*h+"px"+';" /></div>').css({opacity:0,left:e*h+"px",top:f*g+"px",width:b.width()-e*h+"px"}));a('.nivo-box[name="'+h+'"]').height(a('.nivo-box[name="'+h+'"] img').height()+"px")}else{b.append(a('<div class="nivo-box" name="'+h+'" rel="'+g+'"><img src="'+d.currentImage.attr("src")+'" style="position:absolute; width:'+b.width()+"px; height:auto; display:block; max-height:"+b.height()+"px; top:-"+f*g+"px"+"; left:-"+e*h+"px"+';" /></div>').css({opacity:0,left:e*h+"px",top:f*g+"px",width:e+"px"}));a('.nivo-box[name="'+h+'"]').height(a('.nivo-box[name="'+h+'"] img').height()+"px")}}}};var r=function(b,c,d,e){var f=b.data("nivo:vars");if(f&&f.currentSlide===f.totalSlides-1){d.lastSlide.call(this)}if((!f||f.stop)&&!e){return false}d.beforeChange.call(this);if(!e){j.attr("src",f.currentImage.attr("src"))}else{if(e==="prev"){j.attr("src",f.currentImage.attr("src"))}if(e==="next"){j.attr("src",f.currentImage.attr("src"))}}f.currentSlide++;if(f.currentSlide===f.totalSlides){f.currentSlide=0;d.slideshowEnd.call(this)}if(f.currentSlide<0){f.currentSlide=f.totalSlides-1}if(a(c[f.currentSlide]).is("img")){f.currentImage=a(c[f.currentSlide])}else{f.currentImage=a(c[f.currentSlide]).find("img:first")}if(d.controlNav){a(".nivo-controlNav a",b).removeClass("active");a(".nivo-controlNav a:eq("+f.currentSlide+")",b).addClass("active")}j.delay(d.animSpeed).fadeOut(function(){j.attr("src",f.currentImage.attr("src"))});k(d);a(".nivo-slice",b).remove();a(".nivo-box",b).remove();var g=d.effect,h="";if(d.effect==="random"){h=new Array("sliceDownRight","sliceDownLeft","sliceUpRight","sliceUpLeft","sliceUpDown","sliceUpDownLeft","fold","fade","boxRandom","boxRain","boxRainReverse","boxRainGrow","boxRainGrowReverse");g=h[Math.floor(Math.random()*(h.length+1))];if(g===undefined){g="fade"}}if(d.effect.indexOf(",")!==-1){h=d.effect.split(",");g=h[Math.floor(Math.random()*h.length)];if(g===undefined){g="fade"}}if(f.currentImage.attr("data-transition")){g=f.currentImage.attr("data-transition")}f.running=true;var i=0,l=0,m="",n="",o="",r="";if(g==="sliceDown"||g==="sliceDownRight"||g==="sliceDownLeft"){p(b,d,f);i=0;l=0;m=a(".nivo-slice",b);if(g==="sliceDownLeft"){m=a(".nivo-slice",b)._reverse()}m.each(function(){var c=a(this);c.css({top:"0px"});if(l===d.slices-1){setTimeout(function(){c.animate({opacity:"1.0"},d.animSpeed,"",function(){b.trigger("nivo:animFinished")})},100+i)}else{setTimeout(function(){c.animate({opacity:"1.0"},d.animSpeed)},100+i)}i+=50;l++})}else if(g==="sliceUp"||g==="sliceUpRight"||g==="sliceUpLeft"){p(b,d,f);i=0;l=0;m=a(".nivo-slice",b);if(g==="sliceUpLeft"){m=a(".nivo-slice",b)._reverse()}m.each(function(){var c=a(this);c.css({bottom:"0px"});if(l===d.slices-1){setTimeout(function(){c.animate({opacity:"1.0"},d.animSpeed,"",function(){b.trigger("nivo:animFinished")})},100+i)}else{setTimeout(function(){c.animate({opacity:"1.0"},d.animSpeed)},100+i)}i+=50;l++})}else if(g==="sliceUpDown"||g==="sliceUpDownRight"||g==="sliceUpDownLeft"){p(b,d,f);i=0;l=0;var t=0;m=a(".nivo-slice",b);if(g==="sliceUpDownLeft"){m=a(".nivo-slice",b)._reverse()}m.each(function(){var c=a(this);if(l===0){c.css("top","0px");l++}else{c.css("bottom","0px");l=0}if(t===d.slices-1){setTimeout(function(){c.animate({opacity:"1.0"},d.animSpeed,"",function(){b.trigger("nivo:animFinished")})},100+i)}else{setTimeout(function(){c.animate({opacity:"1.0"},d.animSpeed)},100+i)}i+=50;t++})}else if(g==="fold"){p(b,d,f);i=0;l=0;a(".nivo-slice",b).each(function(){var c=a(this);var e=c.width();c.css({top:"0px",width:"0px"});if(l===d.slices-1){setTimeout(function(){c.animate({width:e,opacity:"1.0"},d.animSpeed,"",function(){b.trigger("nivo:animFinished")})},100+i)}else{setTimeout(function(){c.animate({width:e,opacity:"1.0"},d.animSpeed)},100+i)}i+=50;l++})}else if(g==="fade"){p(b,d,f);n=a(".nivo-slice:first",b);n.css({width:b.width()+"px"});n.animate({opacity:"1.0"},d.animSpeed*2,"",function(){b.trigger("nivo:animFinished")})}else if(g==="slideInRight"){p(b,d,f);n=a(".nivo-slice:first",b);n.css({width:"0px",opacity:"1"});n.animate({width:b.width()+"px"},d.animSpeed*2,"",function(){b.trigger("nivo:animFinished")})}else if(g==="slideInLeft"){p(b,d,f);n=a(".nivo-slice:first",b);n.css({width:"0px",opacity:"1",left:"",right:"0px"});n.animate({width:b.width()+"px"},d.animSpeed*2,"",function(){n.css({left:"0px",right:""});b.trigger("nivo:animFinished")})}else if(g==="boxRandom"){q(b,d,f);o=d.boxCols*d.boxRows;l=0;i=0;r=s(a(".nivo-box",b));r.each(function(){var c=a(this);if(l===o-1){setTimeout(function(){c.animate({opacity:"1"},d.animSpeed,"",function(){b.trigger("nivo:animFinished")})},100+i)}else{setTimeout(function(){c.animate({opacity:"1"},d.animSpeed)},100+i)}i+=20;l++})}else if(g==="boxRain"||g==="boxRainReverse"||g==="boxRainGrow"||g==="boxRainGrowReverse"){q(b,d,f);o=d.boxCols*d.boxRows;l=0;i=0;var u=0;var v=0;var w=[];w[u]=[];r=a(".nivo-box",b);if(g==="boxRainReverse"||g==="boxRainGrowReverse"){r=a(".nivo-box",b)._reverse()}r.each(function(){w[u][v]=a(this);v++;if(v===d.boxCols){u++;v=0;w[u]=[]}});for(var x=0;x<d.boxCols*2;x++){var y=x;for(var z=0;z<d.boxRows;z++){if(y>=0&&y<d.boxCols){(function(c,e,f,h,i){var j=a(w[c][e]);var k=j.width();var l=j.height();if(g==="boxRainGrow"||g==="boxRainGrowReverse"){j.width(0).height(0)}if(h===i-1){setTimeout(function(){j.animate({opacity:"1",width:k,height:l},d.animSpeed/1.3,"",function(){b.trigger("nivo:animFinished")})},100+f)}else{setTimeout(function(){j.animate({opacity:"1",width:k,height:l},d.animSpeed/1.3)},100+f)}})(z,y,i,l,o);l++}y--}i+=100}}};var s=function(a){for(var b,c,d=a.length;d;b=parseInt(Math.random()*d,10),c=a[--d],a[d]=a[b],a[b]=c);return a};var t=function(a){if(this.console&&typeof console.log!=="undefined"){console.log(a)}};this.stop=function(){if(!a(b).data("nivo:vars").stop){a(b).data("nivo:vars").stop=true;t("Stop Slider")}};this.start=function(){if(a(b).data("nivo:vars").stop){a(b).data("nivo:vars").stop=false;t("Start Slider")}};d.afterLoad.call(this);return this};a.fn.nivoSlider=function(c){return this.each(function(d,e){var f=a(this);if(f.data("nivoslider")){return f.data("nivoslider")}var g=new b(this,c);f.data("nivoslider",g)})};a.fn.nivoSlider.defaults={effect:"random",slices:15,boxCols:8,boxRows:4,animSpeed:500,pauseTime:3e6,startSlide:0,directionNav:true,directionNavHide:true,controlNav:true,controlNavThumbs:false,controlNavThumbsFromRel:false,controlNavThumbsSearch:".jpg",controlNavThumbsReplace:"_thumb.jpg",keyboardNav:true,pauseOnHover:true,manualAdvance:false,captionOpacity:.8,prevText:"Prev",nextText:"Next",randomStart:false,beforeChange:function(){},afterChange:function(){},slideshowEnd:function(){},lastSlide:function(){},afterLoad:function(){}};a.fn._reverse=[].reverse})(jQuery)