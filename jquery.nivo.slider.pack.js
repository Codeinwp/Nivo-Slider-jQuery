/*
 * jQuery Nivo Slider v2.7.1
 * http://nivo.dev7studios.com
 *
 * Copyright 2011, Gilbert Pellegrom
 * Free to use and abuse under the MIT license.
 * http://www.opensource.org/licenses/mit-license.php
 * 
 * March 2010
 */

(function(c){var t=function(m,p){var d=c.extend({},c.fn.nivoSlider.defaults,p),e={currentSlide:0,currentImage:"",totalSlides:0,running:!1,paused:!1,stop:!1},g=c(m);g.data("nivo:vars",e);g.css("position","relative");g.addClass("nivoSlider");var k=g.children();k.each(function(){var b=c(this),l="";b.is("img")||(b.is("a")&&(b.addClass("nivo-imageLink"),l=b),b=b.find("img:first"));var f=b.width();0==f&&(f=b.attr("width"));var i=b.height();0==i&&(i=b.attr("height"));f>g.width()&&g.width(f);i>g.height()&&g.height(i);""!=l&&l.css("display","none");b.css("display","none");e.totalSlides++});d.randomStart&&(d.startSlide=Math.floor(Math.random()*e.totalSlides));0<d.startSlide&&(d.startSlide>=e.totalSlides&&(d.startSlide=e.totalSlides-1),e.currentSlide=d.startSlide);e.currentImage=c(k[e.currentSlide]).is("img")?c(k[e.currentSlide]):c(k[e.currentSlide]).find("img:first");c(k[e.currentSlide]).is("a")&&c(k[e.currentSlide]).css("display","block");g.css("background",'url("'+e.currentImage.attr("src")+'") no-repeat');g.append(c('<div class="nivo-caption"><p></p></div>').css({display:"none",opacity:d.captionOpacity}));c(".nivo-caption",g).css("opacity",0);var u=function(b){var l=c(".nivo-caption",g);if(e.currentImage.attr("title")!=""&&e.currentImage.attr("title")!=void 0){var f=e.currentImage.attr("title");f.substr(0,1)=="#"&&(f=c(f).html());l.css("opacity")!=0?l.find("p").stop().fadeTo(b.animSpeed,0,function(){c(this).html(f);c(this).stop().fadeTo(b.animSpeed,1)}):l.find("p").html(f);l.stop().fadeTo(b.animSpeed,b.captionOpacity)}else l.stop().fadeTo(b.animSpeed,0)};u(d);var j=0;!d.manualAdvance&&1<k.length&&(j=setInterval(function(){n(g,k,d,false)},d.pauseTime));d.directionNav&&(g.append('<div class="nivo-directionNav"><a class="nivo-prevNav">'+d.prevText+'</a><a class="nivo-nextNav">'+d.nextText+"</a></div>"),d.directionNavHide&&(c(".nivo-directionNav",g).hide(),g.hover(function(){c(".nivo-directionNav",g).show()},function(){c(".nivo-directionNav",g).hide()})),c("a.nivo-prevNav",g).live("click",function(){if(e.running)return false;clearInterval(j);j="";e.currentSlide=e.currentSlide-2;n(g,k,d,"prev")}),c("a.nivo-nextNav",g).live("click",function(){if(e.running)return false;clearInterval(j);j="";n(g,k,d,"next")}));if(d.controlNav){var s=c('<div class="nivo-controlNav"></div>');g.append(s);for(var o=0;o<k.length;o++)if(d.controlNavThumbs){var r=k.eq(o);r.is("img")||(r=r.find("img:first"));d.controlNavThumbsFromRel?s.append('<a class="nivo-control" rel="'+o+'"><img src="'+r.attr("rel")+'" alt="" /></a>'):s.append('<a class="nivo-control" rel="'+o+'"><img src="'+r.attr("src").replace(d.controlNavThumbsSearch,d.controlNavThumbsReplace)+'" alt="" /></a>')}else s.append('<a class="nivo-control" rel="'+o+'">'+(o+1)+"</a>");c(".nivo-controlNav a:eq("+e.currentSlide+")",g).addClass("active");c(".nivo-controlNav a",g).live("click",function(){if(e.running||c(this).hasClass("active"))return false;clearInterval(j);j="";g.css("background",'url("'+e.currentImage.attr("src")+'") no-repeat');e.currentSlide=c(this).attr("rel")-1;n(g,k,d,"control")})}d.keyboardNav&&c(window).keypress(function(b){if(b.keyCode=="37"){if(e.running)return false;clearInterval(j);j="";e.currentSlide=e.currentSlide-2;n(g,k,d,"prev")}if(b.keyCode=="39"){if(e.running)return false;clearInterval(j);j="";n(g,k,d,"next")}});d.pauseOnHover&&g.hover(function(){e.paused=true;clearInterval(j);j=""},function(){e.paused=false;j==""&&!d.manualAdvance&&(j=setInterval(function(){n(g,k,d,false)},d.pauseTime))});g.bind("nivo:animFinished",function(){e.running=false;c(k).each(function(){c(this).is("a")&&c(this).css("display","none")});c(k[e.currentSlide]).is("a")&&c(k[e.currentSlide]).css("display","block");j==""&&!e.paused&&!d.manualAdvance&&(j=setInterval(function(){n(g,k,d,false)},d.pauseTime));d.afterChange.call(this)});var q=function(b,l,f){for(var i=0;i<l.slices;i++){var a=Math.round(b.width()/l.slices);i==l.slices-1?b.append(c('<div class="nivo-slice"></div>').css({left:a*i+"px",width:b.width()-a*i+"px",height:"0px",opacity:"0",background:'url("'+f.currentImage.attr("src")+'") no-repeat -'+(a+i*a-a)+"px 0%"})):b.append(c('<div class="nivo-slice"></div>').css({left:a*i+"px",width:a+"px",height:"0px",opacity:"0",background:'url("'+f.currentImage.attr("src")+'") no-repeat -'+(a+i*a-a)+"px 0%"}))}},v=function(b,l,f){for(var i=Math.round(b.width()/l.boxCols),a=Math.round(b.height()/l.boxRows),h=0;h<l.boxRows;h++)for(var d=0;d<l.boxCols;d++)d==l.boxCols-1?b.append(c('<div class="nivo-box"></div>').css({opacity:0,left:i*d+"px",top:a*h+"px",width:b.width()-i*d+"px",height:a+"px",background:'url("'+f.currentImage.attr("src")+'") no-repeat -'+(i+d*i-i)+"px -"+(a+h*a-a)+"px"})):b.append(c('<div class="nivo-box"></div>').css({opacity:0,left:i*d+"px",top:a*h+"px",width:i+"px",height:a+"px",background:'url("'+f.currentImage.attr("src")+'") no-repeat -'+(i+d*i-i)+"px -"+(a+h*a-a)+"px"}))},t=function(b,d,f){var d=b.width(),i=b.height();b.append(c('<div class="nivo-slice"></div>').css({left:0,top:0,width:d+"px",height:i+"px",overflow:"hidden"}).append(c("<img/>").attr("src",f.currentImage.attr("src")).css({opacity:"0",width:d*1.5+"px",height:i*1.5+"px",display:"block"})))},n=function(b,d,f,i){var a=b.data("nivo:vars");a&&a.currentSlide==a.totalSlides-1&&f.lastSlide.call(this);if((!a||a.stop)&&!i)return false;f.beforeChange.call(this);if(i){i=="prev"&&b.css("background",'url("'+a.currentImage.attr("src")+'") no-repeat');i=="next"&&b.css("background",'url("'+a.currentImage.attr("src")+'") no-repeat')}else b.css("background",'url("'+a.currentImage.attr("src")+'") no-repeat');a.currentSlide++;if(a.currentSlide==a.totalSlides){a.currentSlide=0;f.slideshowEnd.call(this)}if(a.currentSlide<0)a.currentSlide=a.totalSlides-1;a.currentImage=c(d[a.currentSlide]).is("img")?c(d[a.currentSlide]):c(d[a.currentSlide]).find("img:first");if(f.controlNav){c(".nivo-controlNav a",b).removeClass("active");c(".nivo-controlNav a:eq("+a.currentSlide+")",b).addClass("active")}u(f);c(".nivo-slice",b).remove();c(".nivo-box",b).remove();var h=f.effect;if(f.effect=="random"){d=["sliceDownRight","sliceDownLeft","sliceUpRight","sliceUpLeft","sliceUpDown","sliceUpDownLeft","fold","fade","boxRandom","boxRain","boxRainReverse","boxRainGrow","boxRainGrowReverse","zoomIn"];h=d[Math.floor(Math.random()*(d.length+1))];h==void 0&&(h="fade")}if(f.effect.indexOf(",")!=-1){d=f.effect.split(",");h=d[Math.floor(Math.random()*d.length)];h==void 0&&(h="fade")}a.currentImage.attr("data-transition")&&(h=a.currentImage.attr("data-transition"));a.running=true;if(h=="sliceDown"||h=="sliceDownRight"||h=="sliceDownLeft"){q(b,f,a);var e=0,g=0,a=c(".nivo-slice",b);h=="sliceDownLeft"&&(a=c(".nivo-slice",b)._reverse());a.each(function(){var a=c(this);a.css({top:"0px"});g==f.slices-1?setTimeout(function(){a.animate({height:"100%",opacity:"1.0"},f.animSpeed,"",function(){b.trigger("nivo:animFinished")})},100+e):setTimeout(function(){a.animate({height:"100%",opacity:"1.0"},f.animSpeed)},100+e);e=e+50;g++})}else if(h=="sliceUp"||h=="sliceUpRight"||h=="sliceUpLeft"){q(b,f,a);g=e=0;a=c(".nivo-slice",b);h=="sliceUpLeft"&&(a=c(".nivo-slice",b)._reverse());a.each(function(){var a=c(this);a.css({bottom:"0px"});g==f.slices-1?setTimeout(function(){a.animate({height:"100%",opacity:"1.0"},f.animSpeed,"",function(){b.trigger("nivo:animFinished")})},100+e):setTimeout(function(){a.animate({height:"100%",opacity:"1.0"},f.animSpeed)},100+e);e=e+50;g++})}else if(h=="sliceUpDown"||h=="sliceUpDownRight"||h=="sliceUpDownLeft"){q(b,f,a);var k=g=e=0,a=c(".nivo-slice",b);h=="sliceUpDownLeft"&&(a=c(".nivo-slice",b)._reverse());a.each(function(){var a=c(this);if(g==0){a.css("top","0px");g++}else{a.css("bottom","0px");g=0}k==f.slices-1?setTimeout(function(){a.animate({height:"100%",opacity:"1.0"},f.animSpeed,"",function(){b.trigger("nivo:animFinished")})},100+e):setTimeout(function(){a.animate({height:"100%",opacity:"1.0"},f.animSpeed)},100+e);e=e+50;k++})}else if(h=="fold"){q(b,f,a);g=e=0;c(".nivo-slice",b).each(function(){var a=c(this),d=a.width();a.css({top:"0px",height:"100%",width:"0px"});g==f.slices-1?setTimeout(function(){a.animate({width:d,opacity:"1.0"},f.animSpeed,"",function(){b.trigger("nivo:animFinished")})},100+e):setTimeout(function(){a.animate({width:d,opacity:"1.0"},f.animSpeed)},100+e);e=e+50;g++})}else if(h=="fade"){q(b,f,a);var j=c(".nivo-slice:first",b);j.css({height:"100%",width:b.width()+"px"});j.animate({opacity:"1.0"},f.animSpeed*2,"",function(){b.trigger("nivo:animFinished")})}else if(h=="zoomIn"){t(b,f,a);a=b.width();d=b.height();zoomedImg=c(".nivo-slice",b).find("img");topRand=Math.random();leftRand=Math.random();topOffset=Math.round(topRand*d*0.5);leftOffset=Math.round(leftRand*a*0.5);zoomedImg.css({top:-topOffset+"px",left:-leftOffset+"px"});zoomedImg.animate({opacity:"1.0",width:a,height:d,top:0,left:0},f.animSpeed*2,"",function(){b.trigger("nivo:animFinished")})}else if(h=="slideInRight"){q(b,f,a);j=c(".nivo-slice:first",b);j.css({height:"100%",width:"0px",opacity:"1"});j.animate({width:b.width()+"px"},f.animSpeed*2,"",function(){b.trigger("nivo:animFinished")})}else if(h=="slideInLeft"){q(b,f,a);j=c(".nivo-slice:first",b);j.css({height:"100%",width:"0px",opacity:"1",left:"",right:"0px"});j.animate({width:b.width()+"px"},f.animSpeed*2,"",function(){j.css({left:"0px",right:""});b.trigger("nivo:animFinished")})}else if(h=="boxRandom"){v(b,f,a);var n=f.boxCols*f.boxRows,e=g=0,a=x(c(".nivo-box",b));a.each(function(){var a=c(this);g==n-1?setTimeout(function(){a.animate({opacity:"1"},f.animSpeed,"",function(){b.trigger("nivo:animFinished")})},100+e):setTimeout(function(){a.animate({opacity:"1"},f.animSpeed)},100+e);e=e+20;g++})}else if(h=="boxRain"||h=="boxRainReverse"||h=="boxRainGrow"||h=="boxRainGrowReverse"){v(b,f,a);var n=f.boxCols*f.boxRows,m=e=g=0,o=0,p=[];p[m]=[];a=c(".nivo-box",b);if(h=="boxRainReverse"||h=="boxRainGrowReverse")a=c(".nivo-box",b)._reverse();a.each(function(){p[m][o]=c(this);o++;if(o==f.boxCols){m++;o=0;p[m]=[]}});for(a=0;a<f.boxCols*2;a++){d=a;for(i=0;i<f.boxRows;i++){if(d>=0&&d<f.boxCols){(function(a,d,e,g,i){var j=c(p[a][d]),k=j.width(),l=j.height();(h=="boxRainGrow"||h=="boxRainGrowReverse")&&j.width(0).height(0);g==i-1?setTimeout(function(){j.animate({opacity:"1",width:k,height:l},f.animSpeed/1.3,"",function(){b.trigger("nivo:animFinished")})},100+e):setTimeout(function(){j.animate({opacity:"1",width:k,height:l},f.animSpeed/1.3)},100+e)})(i,d,e,g,n);g++}d--}e=e+100}}},x=function(b){for(var c,d,e=b.length;e;c=parseInt(Math.random()*e),d=b[--e],b[e]=b[c],b[c]=d);return b},w=function(b){this.console&&typeof console.log!="undefined"&&console.log(b)};this.stop=function(){if(!c(m).data("nivo:vars").stop){c(m).data("nivo:vars").stop=true;w("Stop Slider")}};this.start=function(){if(c(m).data("nivo:vars").stop){c(m).data("nivo:vars").stop=false;w("Start Slider")}};d.afterLoad.call(this);return this};c.fn.nivoSlider=function(m){return this.each(function(){var p=c(this);if(p.data("nivoslider"))return p.data("nivoslider");var d=new t(this,m);p.data("nivoslider",d)})};c.fn.nivoSlider.defaults={effect:"random",slices:15,boxCols:8,boxRows:4,animSpeed:500,pauseTime:3E3,startSlide:0,directionNav:!0,directionNavHide:!0,controlNav:!0,controlNavThumbs:!1,controlNavThumbsFromRel:!1,controlNavThumbsSearch:".jpg",controlNavThumbsReplace:"_thumb.jpg",keyboardNav:!0,pauseOnHover:!0,manualAdvance:!1,captionOpacity:0.8,prevText:"Prev",nextText:"Next",randomStart:!1,beforeChange:function(){},afterChange:function(){},slideshowEnd:function(){},lastSlide:function(){},afterLoad:function(){}};c.fn._reverse=[].reverse})(jQuery);