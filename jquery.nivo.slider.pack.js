/*
 * jQuery Nivo Slider v2.2
 * http://nivo.dev7studios.com
 *
 * Copyright 2010, Gilbert Pellegrom
 * Free to use and abuse under the MIT license.
 * http://www.opensource.org/licenses/mit-license.php
 */

(function(a){var y=function(r,u){var d=a.extend({},a.fn.nivoSlider.defaults,u),g={currentSlide:0,currentImage:"",totalSlides:0,randAnim:"",running:false,paused:false,stop:false},f=a(r);f.data("nivo:vars",g);f.css("position","relative");f.addClass("nivoSlider");var i=f.children();i.each(function(){var c=a(this),h="";if(!c.is("img")){if(c.is("a")){c.addClass("nivo-imageLink");h=c}c=c.find("img:first")}var b=c.width();if(b==0)b=c.attr("width");var p=c.height();if(p==0)p=c.attr("height");b>f.width()&& f.width(b);p>f.height()&&f.height(p);h!=""&&h.css("display","none");c.css("display","none");g.totalSlides++});if(d.startSlide>0){if(d.startSlide>=g.totalSlides)d.startSlide=g.totalSlides-1;g.currentSlide=d.startSlide}g.currentImage=a(i[g.currentSlide]).is("img")?a(i[g.currentSlide]):a(i[g.currentSlide]).find("img:first");a(i[g.currentSlide]).is("a")&&a(i[g.currentSlide]).css("display","block");f.css("background","url("+g.currentImage.attr("src")+") no-repeat");for(var j=0;j<d.slices;j++){var o=Math.round(f.width()/ d.slices);j==d.slices-1?f.append(a('<div class="nivo-slice"></div>').css({left:o*j+"px",width:f.width()-o*j+"px"})):f.append(a('<div class="nivo-slice"></div>').css({left:o*j+"px",width:o+"px"}))}f.append(a('<div class="nivo-caption"><p></p></div>').css({display:"none",opacity:d.captionOpacity}));if(g.currentImage.attr("title")!=""){j=g.currentImage.attr("title");if(j.substr(0,1)=="#")j=a(j).html();a(".nivo-caption p",f).html(j);a(".nivo-caption",f).fadeIn(d.animSpeed)}var m=0;if(!d.manualAdvance&& i.length>1)m=setInterval(function(){q(f,i,d,false)},d.pauseTime);if(d.directionNav){f.append('<div class="nivo-directionNav"><a class="nivo-prevNav">Prev</a><a class="nivo-nextNav">Next</a></div>');if(d.directionNavHide){a(".nivo-directionNav",f).hide();f.hover(function(){a(".nivo-directionNav",f).show()},function(){a(".nivo-directionNav",f).hide()})}a("a.nivo-prevNav",f).live("click",function(){if(g.running)return false;clearInterval(m);m="";g.currentSlide-=2;q(f,i,d,"prev")});a("a.nivo-nextNav", f).live("click",function(){if(g.running)return false;clearInterval(m);m="";q(f,i,d,"next")})}if(d.controlNav){o=a('<div class="nivo-controlNav"></div>');f.append(o);for(j=0;j<i.length;j++)if(d.controlNavThumbs){var s=i.eq(j);s.is("img")||(s=s.find("img:first"));d.controlNavThumbsFromRel?o.append('<a class="nivo-control" rel="'+j+'"><img src="'+s.attr("rel")+'" alt="" /></a>'):o.append('<a class="nivo-control" rel="'+j+'"><img src="'+s.attr("src").replace(d.controlNavThumbsSearch,d.controlNavThumbsReplace)+ '" alt="" /></a>')}else if(d.controlNavChild){s=i.eq(j).find(d.controlNavChildSelector).eq(0);o.append(s.wrap('<div class="nivo-control-wrapper" rel="'+j+'">').parent())}else o.append('<a class="nivo-control" rel="'+j+'">'+(j+1)+"</a>");a(".nivo-controlNav a.nivo-control, .nivo-controlNav .nivo-control-wrapper",f).eq(g.currentSlide).addClass("active");a(".nivo-controlNav a.nivo-control, .nivo-controlNav .nivo-control-wrapper",f).live("click",function(){if(g.running)return false;if(a(this).hasClass("active"))return false; clearInterval(m);m="";f.css("background","url("+g.currentImage.attr("src")+") no-repeat");g.currentSlide=a(this).attr("rel")-1;q(f,i,d,"control")})}d.keyboardNav&&a(window).keypress(function(c){if(c.keyCode=="37"){if(g.running)return false;clearInterval(m);m="";g.currentSlide-=2;q(f,i,d,"prev")}if(c.keyCode=="39"){if(g.running)return false;clearInterval(m);m="";q(f,i,d,"next")}});d.pauseOnHover&&f.hover(function(){g.paused=true;clearInterval(m);m=""},function(){g.paused=false;if(m==""&&!d.manualAdvance)m= setInterval(function(){q(f,i,d,false)},d.pauseTime)});f.bind("nivo:animFinished",function(){g.running=false;a(i).each(function(){a(this).is("a")&&a(this).css("display","none")});a(i[g.currentSlide]).is("a")&&a(i[g.currentSlide]).css("display","block");if(m==""&&!g.paused&&!d.manualAdvance)m=setInterval(function(){q(f,i,d,false)},d.pauseTime);d.afterChange.call(this)});var q=function(c,h,b,p){var e=c.data("nivo:vars");e.currentSlide==e.totalSlides-1&&b.lastSlide.call(this);if((!e||e.stop)&&!p)return false; b.beforeChange.call(this);if(p){p=="prev"&&c.css("background","url("+e.currentImage.attr("src")+") no-repeat");p=="next"&&c.css("background","url("+e.currentImage.attr("src")+") no-repeat")}else c.css("background","url("+e.currentImage.attr("src")+") no-repeat");e.currentSlide++;if(e.currentSlide==e.totalSlides){e.currentSlide=0;b.slideshowEnd.call(this)}if(e.currentSlide<0)e.currentSlide=e.totalSlides-1;e.currentImage=a(h[e.currentSlide]).is("img")?a(h[e.currentSlide]):a(h[e.currentSlide]).find("img:first"); if(b.controlNav){a(".nivo-controlNav a.nivo-control, .nivo-controlNav .nivo-control-wrapper",c).removeClass("active");a(".nivo-controlNav a.nivo-control, .nivo-controlNav .nivo-control-wrapper",c).eq(e.currentSlide).addClass("active")}if(e.currentImage.attr("title")!=""){var t=e.currentImage.attr("title");if(t.substr(0,1)=="#")t=a(t).html();a(".nivo-caption",c).css("display")=="block"?a(".nivo-caption p",c).fadeOut(b.animSpeed,function(){a(this).html(t);a(this).fadeIn(b.animSpeed)}):a(".nivo-caption p", c).html(t);a(".nivo-caption",c).fadeIn(b.animSpeed)}else a(".nivo-caption",c).fadeOut(b.animSpeed);var l=0;a(".nivo-slice",c).each(function(){var k=Math.round(c.width()/b.slices);a(this).css({height:"0px",opacity:"0",background:"url("+e.currentImage.attr("src")+") no-repeat -"+(k+l*k-k)+"px 0%"});l++});if(b.effect=="random"){h=["sliceDownRight","sliceDownLeft","sliceUpRight","sliceUpLeft","sliceUpDown","sliceUpDownLeft","fold","fade"];e.randAnim=h[Math.floor(Math.random()*(h.length+1))];if(e.randAnim== undefined)e.randAnim="fade"}if(b.effect.indexOf(",")!=-1){h=b.effect.split(",");e.randAnim=a.trim(h[Math.floor(Math.random()*h.length)])}e.running=true;if(b.effect=="sliceDown"||b.effect=="sliceDownRight"||e.randAnim=="sliceDownRight"||b.effect=="sliceDownLeft"||e.randAnim=="sliceDownLeft"){var n=0;l=0;h=a(".nivo-slice",c);if(b.effect=="sliceDownLeft"||e.randAnim=="sliceDownLeft")h=a(".nivo-slice",c)._reverse();h.each(function(){var k=a(this);k.css("top","0px");l==b.slices-1?setTimeout(function(){k.animate({height:"100%", opacity:"1.0"},b.animSpeed,"",function(){c.trigger("nivo:animFinished")})},100+n):setTimeout(function(){k.animate({height:"100%",opacity:"1.0"},b.animSpeed)},100+n);n+=50;l++})}else if(b.effect=="sliceUp"||b.effect=="sliceUpRight"||e.randAnim=="sliceUpRight"||b.effect=="sliceUpLeft"||e.randAnim=="sliceUpLeft"){l=n=0;h=a(".nivo-slice",c);if(b.effect=="sliceUpLeft"||e.randAnim=="sliceUpLeft")h=a(".nivo-slice",c)._reverse();h.each(function(){var k=a(this);k.css("bottom","0px");l==b.slices-1?setTimeout(function(){k.animate({height:"100%", opacity:"1.0"},b.animSpeed,"",function(){c.trigger("nivo:animFinished")})},100+n):setTimeout(function(){k.animate({height:"100%",opacity:"1.0"},b.animSpeed)},100+n);n+=50;l++})}else if(b.effect=="sliceUpDown"||b.effect=="sliceUpDownRight"||e.randAnim=="sliceUpDown"||b.effect=="sliceUpDownLeft"||e.randAnim=="sliceUpDownLeft"){var v=l=n=0;h=a(".nivo-slice",c);if(b.effect=="sliceUpDownLeft"||e.randAnim=="sliceUpDownLeft")h=a(".nivo-slice",c)._reverse();h.each(function(){var k=a(this);if(l==0){k.css("top", "0px");l++}else{k.css("bottom","0px");l=0}v==b.slices-1?setTimeout(function(){k.animate({height:"100%",opacity:"1.0"},b.animSpeed,"",function(){c.trigger("nivo:animFinished")})},100+n):setTimeout(function(){k.animate({height:"100%",opacity:"1.0"},b.animSpeed)},100+n);n+=50;v++})}else if(b.effect=="fold"||e.randAnim=="fold"){l=n=0;a(".nivo-slice",c).each(function(){var k=a(this),w=k.width();k.css({top:"0px",height:"100%",width:"0px"});l==b.slices-1?setTimeout(function(){k.animate({width:w,opacity:"1.0"}, b.animSpeed,"",function(){c.trigger("nivo:animFinished")})},100+n):setTimeout(function(){k.animate({width:w,opacity:"1.0"},b.animSpeed)},100+n);n+=50;l++})}else if(b.effect=="fade"||e.randAnim=="fade"){l=0;a(".nivo-slice",c).each(function(){a(this).css("height","100%");l==b.slices-1?a(this).animate({opacity:"1.0"},b.animSpeed*2,"",function(){c.trigger("nivo:animFinished")}):a(this).animate({opacity:"1.0"},b.animSpeed*2);l++})}},x=function(c){this.console&&typeof console.log!="undefined"&&console.log(c)}; this.stop=function(){if(!a(r).data("nivo:vars").stop){a(r).data("nivo:vars").stop=true;x("Stop Slider")}};this.start=function(){if(a(r).data("nivo:vars").stop){a(r).data("nivo:vars").stop=false;x("Start Slider")}};d.afterLoad.call(this)};a.fn.nivoSlider=function(r){return this.each(function(){var u=a(this);if(!u.data("nivoslider")){var d=new y(this,r);u.data("nivoslider",d)}})};a.fn.nivoSlider.defaults={effect:"random",slices:15,animSpeed:500,pauseTime:3E3,startSlide:0,directionNav:true,directionNavHide:true, controlNav:true,controlNavChild:false,controlNavChildSelector:false,controlNavThumbs:false,controlNavThumbsFromRel:false,controlNavThumbsSearch:".jpg",controlNavThumbsReplace:"_thumb.jpg",keyboardNav:true,pauseOnHover:true,manualAdvance:false,captionOpacity:0.8,beforeChange:function(){},afterChange:function(){},slideshowEnd:function(){},lastSlide:function(){},afterLoad:function(){}};a.fn._reverse=[].reverse})(jQuery);